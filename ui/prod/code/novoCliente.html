<html>
    <head>
        <link rel="stylesheet" href="css/theme.css">
        <meta charset="UTF-8">
        <script>
            (function(s,t,a,n){s[t]||(s[t]=a,n=s[a]=function(){n.q.push(arguments)},
            n.q=[],n.v=2,n.l=1*new Date)})(window,"InstanaEumObject","ineum");
            ineum('reportingUrl', 'https://13.116.89.223:446/eum/');
            ineum('key', 'eFTsWsFDQSS7ZjtlGSMJhw');          
            ineum('page','novoCliente.html');
            ineum('trackSessions');
          </script>        
        <script lang="javascript">
            function recuperaAmbiente()
            {
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && (this.status == 200 || this.status==201)) {
                    //var list = JSON.parse(this.responseText);
                    document.getElementById('ambiente').innerHTML=this.responseText;
                }
                };
                xhttp.open("GET", "https://apic-caso8-gw-gateway-cp4i.cp4-caso8-d562ebd5f38f1bf50619fbd355c65b3e-0000.br-sao.containers.appdomain.cloud/caso8/producao/cliente-codeengine-prod/api/ambiente", true);
                xhttp.setRequestHeader("Content-type", "application/json");
                xhttp.setRequestHeader("X-IBM-Client-Id", "e043a4214d85590ffcf1dccd31bc50e4");
                xhttp.send();
                //xmlhttp.setRequestHeader('Authorization', 'Basic ' + window.btoa('apiusername:apiuserpassword'));

            }
            function Salvar()
            {
                if (form1.nome.value.length < 1)
                {
                    alert('O campo nome é obrigatório e deve ser informado!');
                    return;
                }
                if (form1.email.value.length < 1)
                {
                    alert('O campo e-mail é obrigatório e deve ser informado!');
                    return;
                }
                if (form1.telefone.value.length < 1)
                {
                    alert('O campo telefone é obrigatório e deve ser informado!');
                    return;
                }
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 201) {
                    window.location='menu.html';
                }
                
                };
                xhttp.open("POST", "https://apic-caso8-gw-gateway-cp4i.cp4-caso8-d562ebd5f38f1bf50619fbd355c65b3e-0000.br-sao.containers.appdomain.cloud/caso8/producao/cliente-codeengine-prod/api/clientes", true);
                xhttp.setRequestHeader("Content-type", "application/json");
                xhttp.setRequestHeader("X-IBM-Client-Id", "e043a4214d85590ffcf1dccd31bc50e4");
                //xmlhttp.setRequestHeader('Authorization', 'Basic ' + window.btoa('apiusername:apiuserpassword'));
                var body ="{ "+ 
                            " \"nome\": \"" + form1.nome.value +"\", "+ 
                            " \"email\": \"" + form1.email.value +"\", "+ 
                            " \"telefone\": \"" + form1.telefone.value +"\" "+ 
                            "}";
                xhttp.send(body);

            }
        </script>
    </head>
    <body onload="recuperaAmbiente();">
        <center>
            <br /><img src="img/logo.png" width="120px" />
            <h1>Novo Cliente</h1>
            <form action="#" name="form1">
                <table border="0">
                    <tr>
                        <th>Nome:</th>
                        <td><input type="text" id="nome" name="nome" size="50" /></td>
                    </tr>
                    <tr>
                        <th>email:</th>
                        <td><input type="text" id="email" name="email" size="50" /></td>
                    </tr>
                    <tr>
                        <th>Telefone:</th>
                        <td><input type="text" id="telefone" name="telefone" size="50" /></td>
                    </tr>
                </table>
                <br />
                <input type="button" onclick="Salvar();" value="Salvar" /> <input type="button" onclick="window.history.back();" value="Cancelar" />
                <br /><br />
                Ambiente: <div id="ambiente" name="ambiente"></div>
            </form>
        </center>
    </body>
</html>