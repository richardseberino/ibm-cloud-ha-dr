<html>
    <head>
        <link rel="stylesheet" href="css/theme.css">
        <title>Demo App - Bradesco Seguros</title>
        <meta charset="UTF-8">
        <script lang="javascript">
            function recuperaAmbiente()
            {
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    //var list = JSON.parse(this.responseText);
                    document.getElementById('ambiente').innerHTML=this.responseText;
                }
                };
                xhttp.open("GET", "http://88503a09-br-sao.lb.appdomain.cloud:8081/api/ambiente", true);
                xhttp.setRequestHeader("Content-type", "application/json");
                xhttp.send();
                //xmlhttp.setRequestHeader('Authorization', 'Basic ' + window.btoa('apiusername:apiuserpassword'));

            }                
            function processaLogin()
            {
                if (form1.usuario.value.length < 1)
                {
                    alert('O campo usuário é obrigatório e deve ser informado!');
                    return;
                }
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    window.location='menu.html';
                    //alert(this.responseText);
                }
                };
                xhttp.open("POST", "http://88503a09-br-sao.lb.appdomain.cloud:8081/api/sessoes", true);
                xhttp.setRequestHeader("Content-type", "application/json");
                xhttp.send("{\"usuario\": \"" + form1.usuario.value +"\" }");
            }
        </script>
    </head>
    <body onload="recuperaAmbiente();">
        <center>
            <br /><img src="img/logo.png" width="120px" />
            <h1>Login</h1>
            <form action="#" name="form1">
                <table border="0">
                    <tr>
                        <th>Usuário:</th>
                        <td><input type="text" id="usuario" name="usuario" size="20" /></td>
                    </tr>
                </table>
                <br />
                <input css="botao" type="button" onclick="processaLogin();" value="Entrar" />
            </form>
            Ambiente: <div id="ambiente" name="ambiente"></div>
        </center>
    </body>
</html>